import{g as Ot,u as G,a as At,j as r,c as Ut,b as Re,C as Fe,d as re,e as E,A as $t,L as St,f as It,q as _t,h as Ne,i as it,k as ge,l as Et,m as Ft,s as Nt,n as Vt,T as zt,o as Bt,p as Mt}from"./index-b95f859d.js";import{r as g,A as oe,_ as ie,f as pe,k as je,I as Ve,d as Y,M as ze,B as F,F as ue,l as at,S as R,n as Rt,Z as Dt,o as Pt,p as Ht,h as Jt,j as Wt,T as qt,q as Zt,s as Gt,E as Qt,u as Xt,P as Yt,D as Kt,v as Ct,w as en,x as tn,y as fe,z as J,G as nn,C as $,L as ve,R as we,H as sn,J as ln,K as rn,N as Te}from"./antd-b4989dd4.js";var on={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const an=on;var cn=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:an}))},un=g.forwardRef(cn);const ct=un;var dn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};const fn=dn;var mn=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:fn}))},pn=g.forwardRef(mn);const hn=pn;var gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};const bn=gn;var yn=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:bn}))},kn=g.forwardRef(yn);const jn=kn;var xn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const vn=xn;var wn=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:vn}))},Tn=g.forwardRef(wn);const Ln=Tn;var On={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const An=On;var Un=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:An}))},$n=g.forwardRef(Un);const Sn=$n;var In={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};const _n=In;var En=function(n,s){return g.createElement(oe,ie({},n,{ref:s,icon:_n}))},Fn=g.forwardRef(En);const Nn=Fn;function ut(e,n=!1){const s=e.length;let t=0,l="",o=0,c=16,i=0,a=0,f=0,u=0,p=0;function j(m,x){let d=0,y=0;for(;d<m||!x;){let b=e.charCodeAt(t);if(b>=48&&b<=57)y=y*16+b-48;else if(b>=65&&b<=70)y=y*16+b-65+10;else if(b>=97&&b<=102)y=y*16+b-97+10;else break;t++,d++}return d<m&&(y=-1),y}function T(m){t=m,l="",o=0,c=16,p=0}function h(){let m=t;if(e.charCodeAt(t)===48)t++;else for(t++;t<e.length&&te(e.charCodeAt(t));)t++;if(t<e.length&&e.charCodeAt(t)===46)if(t++,t<e.length&&te(e.charCodeAt(t)))for(t++;t<e.length&&te(e.charCodeAt(t));)t++;else return p=3,e.substring(m,t);let x=t;if(t<e.length&&(e.charCodeAt(t)===69||e.charCodeAt(t)===101))if(t++,(t<e.length&&e.charCodeAt(t)===43||e.charCodeAt(t)===45)&&t++,t<e.length&&te(e.charCodeAt(t))){for(t++;t<e.length&&te(e.charCodeAt(t));)t++;x=t}else p=3;return e.substring(m,x)}function k(){let m="",x=t;for(;;){if(t>=s){m+=e.substring(x,t),p=2;break}const d=e.charCodeAt(t);if(d===34){m+=e.substring(x,t),t++;break}if(d===92){if(m+=e.substring(x,t),t++,t>=s){p=2;break}switch(e.charCodeAt(t++)){case 34:m+='"';break;case 92:m+="\\";break;case 47:m+="/";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+=`
`;break;case 114:m+="\r";break;case 116:m+="	";break;case 117:const b=j(4,!0);b>=0?m+=String.fromCharCode(b):p=4;break;default:p=5}x=t;continue}if(d>=0&&d<=31)if(de(d)){m+=e.substring(x,t),p=2;break}else p=6;t++}return m}function v(){if(l="",p=0,o=t,a=i,u=f,t>=s)return o=s,c=17;let m=e.charCodeAt(t);if(Le(m)){do t++,l+=String.fromCharCode(m),m=e.charCodeAt(t);while(Le(m));return c=15}if(de(m))return t++,l+=String.fromCharCode(m),m===13&&e.charCodeAt(t)===10&&(t++,l+=`
`),i++,f=t,c=14;switch(m){case 123:return t++,c=1;case 125:return t++,c=2;case 91:return t++,c=3;case 93:return t++,c=4;case 58:return t++,c=6;case 44:return t++,c=5;case 34:return t++,l=k(),c=10;case 47:const x=t-1;if(e.charCodeAt(t+1)===47){for(t+=2;t<s&&!de(e.charCodeAt(t));)t++;return l=e.substring(x,t),c=12}if(e.charCodeAt(t+1)===42){t+=2;const d=s-1;let y=!1;for(;t<d;){const b=e.charCodeAt(t);if(b===42&&e.charCodeAt(t+1)===47){t+=2,y=!0;break}t++,de(b)&&(b===13&&e.charCodeAt(t)===10&&t++,i++,f=t)}return y||(t++,p=1),l=e.substring(x,t),c=13}return l+=String.fromCharCode(m),t++,c=16;case 45:if(l+=String.fromCharCode(m),t++,t===s||!te(e.charCodeAt(t)))return c=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l+=h(),c=11;default:for(;t<s&&L(m);)t++,m=e.charCodeAt(t);if(o!==t){switch(l=e.substring(o,t),l){case"true":return c=8;case"false":return c=9;case"null":return c=7}return c=16}return l+=String.fromCharCode(m),t++,c=16}}function L(m){if(Le(m)||de(m))return!1;switch(m){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function A(){let m;do m=v();while(m>=12&&m<=15);return m}return{setPosition:T,getPosition:()=>t,scan:n?A:v,getToken:()=>c,getTokenValue:()=>l,getTokenOffset:()=>o,getTokenLength:()=>t-o,getTokenStartLine:()=>a,getTokenStartCharacter:()=>o-u,getTokenError:()=>p}}function Le(e){return e===32||e===9}function de(e){return e===10||e===13}function te(e){return e>=48&&e<=57}var De;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(De||(De={}));const M=new Array(20).fill(0).map((e,n)=>" ".repeat(n)),ne=200,Pe={" ":{"\n":new Array(ne).fill(0).map((e,n)=>`
`+" ".repeat(n)),"\r":new Array(ne).fill(0).map((e,n)=>"\r"+" ".repeat(n)),"\r\n":new Array(ne).fill(0).map((e,n)=>`\r
`+" ".repeat(n))},"	":{"\n":new Array(ne).fill(0).map((e,n)=>`
`+"	".repeat(n)),"\r":new Array(ne).fill(0).map((e,n)=>"\r"+"	".repeat(n)),"\r\n":new Array(ne).fill(0).map((e,n)=>`\r
`+"	".repeat(n))}},Vn=[`
`,"\r",`\r
`];function dt(e,n,s){let t,l,o,c,i;if(n){for(c=n.offset,i=c+n.length,o=c;o>0&&!xe(e,o-1);)o--;let d=i;for(;d<e.length&&!xe(e,d);)d++;l=e.substring(o,d),t=zn(l,s)}else l=e,t=0,o=0,c=0,i=e.length;const a=Bn(s,e),f=Vn.includes(a);let u=0,p=0,j;s.insertSpaces?j=M[s.tabSize||4]??se(M[1],s.tabSize||4):j="	";const T=j==="	"?"	":" ";let h=ut(l,!1),k=!1;function v(){if(u>1)return se(a,u)+se(j,t+p);const d=j.length*(t+p);return!f||d>Pe[T][a].length?a+se(j,t+p):d<=0?a:Pe[T][a][d]}function L(){let d=h.scan();for(u=0;d===15||d===14;)d===14&&s.keepLines?u+=1:d===14&&(u=1),d=h.scan();return k=d===16||h.getTokenError()!==0,d}const A=[];function m(d,y,b){!k&&(!n||y<i&&b>c)&&e.substring(y,b)!==d&&A.push({offset:y,length:b-y,content:d})}let x=L();if(s.keepLines&&u>0&&m(se(a,u),0,0),x!==17){let d=h.getTokenOffset()+o,y=j.length*t<20&&s.insertSpaces?M[j.length*t]:se(j,t);m(y,o,d)}for(;x!==17;){let d=h.getTokenOffset()+h.getTokenLength()+o,y=L(),b="",U=!1;for(;u===0&&(y===12||y===13);){let Q=h.getTokenOffset()+o;m(M[1],d,Q),d=h.getTokenOffset()+h.getTokenLength()+o,U=y===12,b=U?v():"",y=L()}if(y===2)x!==1&&p--,s.keepLines&&u>0||!s.keepLines&&x!==1?b=v():s.keepLines&&(b=M[1]);else if(y===4)x!==3&&p--,s.keepLines&&u>0||!s.keepLines&&x!==3?b=v():s.keepLines&&(b=M[1]);else{switch(x){case 3:case 1:p++,s.keepLines&&u>0||!s.keepLines?b=v():b=M[1];break;case 5:s.keepLines&&u>0||!s.keepLines?b=v():b=M[1];break;case 12:b=v();break;case 13:u>0?b=v():U||(b=M[1]);break;case 6:s.keepLines&&u>0?b=v():U||(b=M[1]);break;case 10:s.keepLines&&u>0?b=v():y===6&&!U&&(b="");break;case 7:case 8:case 9:case 11:case 2:case 4:s.keepLines&&u>0?b=v():(y===12||y===13)&&!U?b=M[1]:y!==5&&y!==17&&(k=!0);break;case 16:k=!0;break}u>0&&(y===12||y===13)&&(b=v())}y===17&&(s.keepLines&&u>0?b=v():b=s.insertFinalNewline?a:"");const _=h.getTokenOffset()+o;m(b,d,_),x=y}return A}function se(e,n){let s="";for(let t=0;t<n;t++)s+=e;return s}function zn(e,n){let s=0,t=0;const l=n.tabSize||4;for(;s<e.length;){let o=e.charAt(s);if(o===M[1])t++;else if(o==="	")t+=l;else break;s++}return Math.floor(t/l)}function Bn(e,n){for(let s=0;s<n.length;s++){const t=n.charAt(s);if(t==="\r")return s+1<n.length&&n.charAt(s+1)===`
`?`\r
`:"\r";if(t===`
`)return`
`}return e&&e.eol||`
`}function xe(e,n){return`\r
`.indexOf(e.charAt(n))!==-1}var he;(function(e){e.DEFAULT={allowTrailingComma:!1}})(he||(he={}));function Mn(e,n=[],s=he.DEFAULT){let t=null,l=[];const o=[];function c(a){Array.isArray(l)?l.push(a):t!==null&&(l[t]=a)}return mt(e,{onObjectBegin:()=>{const a={};c(a),o.push(l),l=a,t=null},onObjectProperty:a=>{t=a},onObjectEnd:()=>{l=o.pop()},onArrayBegin:()=>{const a=[];c(a),o.push(l),l=a,t=null},onArrayEnd:()=>{l=o.pop()},onLiteralValue:c,onError:(a,f,u)=>{n.push({error:a,offset:f,length:u})}},s),l[0]}function ft(e,n=[],s=he.DEFAULT){let t={type:"array",offset:-1,length:-1,children:[],parent:void 0};function l(a){t.type==="property"&&(t.length=a-t.offset,t=t.parent)}function o(a){return t.children.push(a),a}mt(e,{onObjectBegin:a=>{t=o({type:"object",offset:a,length:-1,parent:t,children:[]})},onObjectProperty:(a,f,u)=>{t=o({type:"property",offset:f,length:-1,parent:t,children:[]}),t.children.push({type:"string",value:a,offset:f,length:u,parent:t})},onObjectEnd:(a,f)=>{l(a+f),t.length=a+f-t.offset,t=t.parent,l(a+f)},onArrayBegin:(a,f)=>{t=o({type:"array",offset:a,length:-1,parent:t,children:[]})},onArrayEnd:(a,f)=>{t.length=a+f-t.offset,t=t.parent,l(a+f)},onLiteralValue:(a,f,u)=>{o({type:Rn(a),offset:f,length:u,parent:t,value:a}),l(f+u)},onSeparator:(a,f,u)=>{t.type==="property"&&(a===":"?t.colonOffset=f:a===","&&l(f))},onError:(a,f,u)=>{n.push({error:a,offset:f,length:u})}},s);const i=t.children[0];return i&&delete i.parent,i}function Ue(e,n){if(!e)return;let s=e;for(let t of n)if(typeof t=="string"){if(s.type!=="object"||!Array.isArray(s.children))return;let l=!1;for(const o of s.children)if(Array.isArray(o.children)&&o.children[0].value===t&&o.children.length===2){s=o.children[1],l=!0;break}if(!l)return}else{const l=t;if(s.type!=="array"||l<0||!Array.isArray(s.children)||l>=s.children.length)return;s=s.children[l]}return s}function mt(e,n,s=he.DEFAULT){const t=ut(e,!1),l=[];function o(w){return w?()=>w(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}function c(w){return w?()=>w(t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>l.slice()):()=>!0}function i(w){return w?O=>w(O,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter()):()=>!0}function a(w){return w?O=>w(O,t.getTokenOffset(),t.getTokenLength(),t.getTokenStartLine(),t.getTokenStartCharacter(),()=>l.slice()):()=>!0}const f=c(n.onObjectBegin),u=a(n.onObjectProperty),p=o(n.onObjectEnd),j=c(n.onArrayBegin),T=o(n.onArrayEnd),h=a(n.onLiteralValue),k=i(n.onSeparator),v=o(n.onComment),L=i(n.onError),A=s&&s.disallowComments,m=s&&s.allowTrailingComma;function x(){for(;;){const w=t.scan();switch(t.getTokenError()){case 4:d(14);break;case 5:d(15);break;case 3:d(13);break;case 1:A||d(11);break;case 2:d(12);break;case 6:d(16);break}switch(w){case 12:case 13:A?d(10):v();break;case 16:d(1);break;case 15:case 14:break;default:return w}}}function d(w,O=[],q=[]){if(L(w),O.length+q.length>0){let B=t.getToken();for(;B!==17;){if(O.indexOf(B)!==-1){x();break}else if(q.indexOf(B)!==-1)break;B=x()}}}function y(w){const O=t.getTokenValue();return w?h(O):(u(O),l.push(O)),x(),!0}function b(){switch(t.getToken()){case 11:const w=t.getTokenValue();let O=Number(w);isNaN(O)&&(d(2),O=0),h(O);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return x(),!0}function U(){return t.getToken()!==10?(d(3,[],[2,5]),!1):(y(!1),t.getToken()===6?(k(":"),x(),S()||d(4,[],[2,5])):d(5,[],[2,5]),l.pop(),!0)}function _(){f(),x();let w=!1;for(;t.getToken()!==2&&t.getToken()!==17;){if(t.getToken()===5){if(w||d(4,[],[]),k(","),x(),t.getToken()===2&&m)break}else w&&d(6,[],[]);U()||d(4,[],[2,5]),w=!0}return p(),t.getToken()!==2?d(7,[2],[]):x(),!0}function Q(){j(),x();let w=!0,O=!1;for(;t.getToken()!==4&&t.getToken()!==17;){if(t.getToken()===5){if(O||d(4,[],[]),k(","),x(),t.getToken()===4&&m)break}else O&&d(6,[],[]);w?(l.push(0),w=!1):l[l.length-1]++,S()||d(4,[],[4,5]),O=!0}return T(),w||l.pop(),t.getToken()!==4?d(8,[4],[]):x(),!0}function S(){switch(t.getToken()){case 3:return Q();case 1:return _();case 10:return y(!0);default:return b()}}return x(),t.getToken()===17?s.allowEmptyContent?!0:(d(4,[],[]),!1):S()?(t.getToken()!==17&&d(9,[],[]),!0):(d(4,[],[]),!1)}function Rn(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(e){if(Array.isArray(e))return"array"}else return"null";return"object"}default:return"null"}}function Dn(e,n,s,t){const l=n.slice(),c=ft(e,[]);let i,a;for(;l.length>0&&(a=l.pop(),i=Ue(c,l),i===void 0&&s!==void 0);)typeof a=="string"?s={[a]:s}:s=[s];if(i)if(i.type==="object"&&typeof a=="string"&&Array.isArray(i.children)){const f=Ue(i,[a]);if(f!==void 0)if(s===void 0){if(!f.parent)throw new Error("Malformed AST");const u=i.children.indexOf(f.parent);let p,j=f.parent.offset+f.parent.length;if(u>0){let T=i.children[u-1];p=T.offset+T.length}else p=i.offset+1,i.children.length>1&&(j=i.children[1].offset);return ee(e,{offset:p,length:j-p,content:""},t)}else return ee(e,{offset:f.offset,length:f.length,content:JSON.stringify(s)},t);else{if(s===void 0)return[];const u=`${JSON.stringify(a)}: ${JSON.stringify(s)}`,p=t.getInsertionIndex?t.getInsertionIndex(i.children.map(T=>T.children[0].value)):i.children.length;let j;if(p>0){let T=i.children[p-1];j={offset:T.offset+T.length,length:0,content:","+u}}else i.children.length===0?j={offset:i.offset+1,length:0,content:u}:j={offset:i.offset+1,length:0,content:u+","};return ee(e,j,t)}}else if(i.type==="array"&&typeof a=="number"&&Array.isArray(i.children)){const f=a;if(f===-1){const u=`${JSON.stringify(s)}`;let p;if(i.children.length===0)p={offset:i.offset+1,length:0,content:u};else{const j=i.children[i.children.length-1];p={offset:j.offset+j.length,length:0,content:","+u}}return ee(e,p,t)}else if(s===void 0&&i.children.length>=0){const u=a,p=i.children[u];let j;if(i.children.length===1)j={offset:i.offset+1,length:i.length-2,content:""};else if(i.children.length-1===u){let T=i.children[u-1],h=T.offset+T.length,k=i.offset+i.length;j={offset:h,length:k-2-h,content:""}}else j={offset:p.offset,length:i.children[u+1].offset-p.offset,content:""};return ee(e,j,t)}else if(s!==void 0){let u;const p=`${JSON.stringify(s)}`;if(!t.isArrayInsertion&&i.children.length>a){const j=i.children[a];u={offset:j.offset,length:j.length,content:p}}else if(i.children.length===0||a===0)u={offset:i.offset+1,length:0,content:i.children.length===0?p:p+","};else{const j=a>i.children.length?i.children.length:a,T=i.children[j-1];u={offset:T.offset+T.length,length:0,content:","+p}}return ee(e,u,t)}else throw new Error(`Can not ${s===void 0?"remove":t.isArrayInsertion?"insert":"modify"} Array index ${f} as length is not sufficient`)}else throw new Error(`Can not add ${typeof a!="number"?"index":"property"} to parent of type ${i.type}`);else{if(s===void 0)throw new Error("Can not delete in empty document");return ee(e,{offset:c?c.offset:0,length:c?c.length:0,content:JSON.stringify(s)},t)}}function ee(e,n,s){if(!s.formattingOptions)return[n];let t=$e(e,n),l=n.offset,o=n.offset+n.content.length;if(n.length===0||n.content.length===0){for(;l>0&&!xe(t,l-1);)l--;for(;o<t.length&&!xe(t,o);)o++}const c=dt(t,{offset:l,length:o-l},{...s.formattingOptions,keepLines:!1});for(let a=c.length-1;a>=0;a--){const f=c[a];t=$e(t,f),l=Math.min(l,f.offset),o=Math.max(o,f.offset+f.length),o+=f.content.length-f.length}const i=e.length-(t.length-o)-l;return[{offset:l,length:i,content:t.substring(l,o)}]}function $e(e,n){return e.substring(0,n.offset)+n.content+e.substring(n.offset+n.length)}var He;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(He||(He={}));var Je;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(Je||(Je={}));const Pn=Mn,Hn=ft,Jn=Ue;var We;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(We||(We={}));function Wn(e,n,s){return dt(e,n,s)}function ye(e,n,s,t){return Dn(e,n,s,t)}function Be(e,n){let s=n.slice(0).sort((l,o)=>{const c=l.offset-o.offset;return c===0?l.length-o.length:c}),t=e.length;for(let l=s.length-1;l>=0;l--){let o=s[l];if(o.offset+o.length<=t)e=$e(e,o);else throw new Error("Overlapping edit");t=o.offset}return e}const qn=["_id_","_key_","_type_"],Se=e=>JSON.stringify(e,null,4),me=e=>{const n={...e};for(const s of qn)delete n[s];return Se(n)},Zn=e=>Be(e,Wn(e,void 0,{tabSize:4,insertSpaces:!0})),K=e=>{const n=[],s=Pn(e,n,{allowTrailingComma:!0});if(n.length)throw console.error(n),n[0];return s},Gn=(e,n)=>{const s=[],t=ye.bind(null,e);return n.forEach(({path:l,value:o,options:c},i)=>{l=Array.isArray(l)?l:l.split("."),s.push(...t(l,o,c||{}))}),Be(e,s)},Qn=(e,n)=>{const s=URL.createObjectURL(new Blob([e])),t=document.createElement("a");t.download=n,t.href=s,t.click(),URL.revokeObjectURL(s)};function Ie(e,n,s){const t=e!==void 0,l=n!==void 0,[o,c]=g.useState(t?e:l?n:s),i=g.useRef({value:o,setValue:f=>{let u;typeof f=="function"?u=f(i.current.value):u=f,i.current.value=u,c(u)}});return[g.useMemo(()=>{const u=e!==void 0?e:o;return i.current.value=u,u},[e,o]),i.current.setValue]}const Xn={zh:"zh-cn",en:""};(function(){const e=window.require;if(e){const n=Ot();e.config({"vs/nls":{availableLanguages:{"*":Xn[n.resolvedLanguage]??""}}})}window.monacoIsReady=new Promise((n,s)=>{if(!e)return s("Not loaded monaco loader.js");e(["vs/editor/editor.main"],function(){n(monaco)})})})();monacoIsReady.then(()=>{monaco.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0,trailingCommas:"warning",validate:!0})});const Yn={minimap:{enabled:!1},automaticLayout:!0},Kn=(e,n)=>{const{onChange:s,options:t,height:l,className:o,theme:c,style:i}=e,{t:a}=G(),[f,u]=Ie(e.language,"javascript"),[p,j]=Ie(e.value,e.defaultValue,""),[T,h]=g.useState(!1),k=g.useRef(null),v=g.useRef(null),L=g.useRef({}),A=At(),m=g.useMemo(()=>c||(A?"vs-dark":"vs"),[c,A]);return pe.useImperativeHandle(n,()=>v.current),pe.useImperativeHandle(L,()=>({onChange:s}),[s]),g.useEffect(()=>{monacoIsReady.then(()=>{h(!0)})},[]),g.useEffect(()=>{if(T&&k.current){const x=k.current;let d;return monacoIsReady.then(()=>{d=v.current=monaco.editor.create(x,{value:p,language:f,theme:m,...Yn,...t}),d.onDidChangeModelContent(function(y){var U,_;const b=d.getValue();j(b),(_=(U=L.current)==null?void 0:U.onChange)==null||_.call(U,b)}),d.addCommand(monaco.KeyMod.Alt|monaco.KeyCode.KeyX,y=>{var b;(b=d.getAction("my-autoWrap-toggle"))==null||b.run()}),d.addAction({id:"my-autoWrap-toggle",label:a("msg.wordWrap"),keybindings:[monaco.KeyMod.Alt|monaco.KeyCode.KeyZ],run:function(y,b){const U=y.getOption(monaco.editor.EditorOption.wordWrap);y.updateOptions({wordWrap:U==="on"?"off":"on"})}})}),()=>{var y;(y=d==null?void 0:d.dispose)==null||y.call(d)}}},[T]),g.useEffect(()=>{if(v.current){const x=v.current;p!=x.getValue()&&x.executeEdits(null,[{range:x.getModel().getFullModelRange(),text:p,forceMoveMarkers:!1}])}},[p]),T?r.jsx("div",{className:je(o),style:{height:l||"100%",minHeight:0,minWidth:0,boxSizing:"border-box",...i},ref:k}):r.jsx(Ve.TextArea,{style:{height:l||"100%"},className:je(o),value:p,onChange:x=>{var y,b;const d=x.target.value;j(d),(b=(y=L.current)==null?void 0:y.onChange)==null||b.call(y,d)}})},pt=pe.forwardRef(Kn),Cn=e=>{const{onFinish:n,trigger:s,open:t,onOpenChange:l,modalProps:o,title:c,width:i,formRef:a,children:f,isFull:u,...p}=e,[j,T]=Ie(t,!1),[h]=Y.useForm(),k=g.useCallback(()=>{var m;T(!1),l==null||l(!1),(m=o==null?void 0:o.onCancel)==null||m.call(o,{})},[l]),v=g.useCallback(()=>{var m;h.resetFields(),(m=o==null?void 0:o.afterClose)==null||m.call(o)},[h,o]),L=g.useMemo(()=>async function(m){await(n==null?void 0:n.apply(null,[m]))===!0&&k()},[n,k]),A=g.useMemo(()=>{const m=je(o==null?void 0:o.className,{"full-modal":u});return{...o,className:m,onCancel:k,onOk:()=>{h.submit()},afterClose:v,open:j,title:c,width:i}},[v,h,o,k,j,c,i,u]);return g.useEffect(()=>{if(!a)return;switch(typeof a){case"function":a(h);break;case"object":a.current=h;break}},[h,a]),r.jsxs(r.Fragment,{children:[r.jsx(ze,{...A,children:r.jsx(Y,{form:h,onFinish:L,...p,children:f})}),s&&pe.cloneElement(s,{onClick:()=>{T(!0)}})]})};let be;const es=new Uint8Array(16);function ts(){if(!be&&(be=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!be))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return be(es)}const I=[];for(let e=0;e<256;++e)I.push((e+256).toString(16).slice(1));function ns(e,n=0){return I[e[n+0]]+I[e[n+1]]+I[e[n+2]]+I[e[n+3]]+"-"+I[e[n+4]]+I[e[n+5]]+"-"+I[e[n+6]]+I[e[n+7]]+"-"+I[e[n+8]]+I[e[n+9]]+"-"+I[e[n+10]]+I[e[n+11]]+I[e[n+12]]+I[e[n+13]]+I[e[n+14]]+I[e[n+15]]}const ss=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qe={randomUUID:ss};function ls(e,n,s){if(qe.randomUUID&&!n&&!e)return qe.randomUUID();e=e||{};const t=e.random||(e.rng||ts)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,n){s=s||0;for(let l=0;l<16;++l)n[s+l]=t[l];return n}return ns(t)}const ht=e=>{const{children:n,label:s,...t}=e,{json:l,cli:o}=e,c=ls();if(n)return{key:c,...t,label:Re(s),children:n.map(ht)};if(l)return{key:c,...t,label:Re(s),title:o}},le=e=>{const{templates:n,modalProps:s,...t}=e,{t:l}=G(),o=g.useRef(),c=g.useRef(null),[i,a]=g.useState(!1),f=T=>{var k,v,L;let h=T;if((k=e.initialValues)!=null&&k.value){const A=K(e.initialValues.value);h=A.name?Gn(T,[{path:"name",value:A.name}]):T}h=Zn(h),(v=o.current)==null||v.setFieldValue("value",h),(L=o.current)==null||L.validateFields()},u=g.useMemo(()=>n==null?void 0:n.map(ht),[n]),p=g.useCallback(T=>{var h,k;(k=(h=c.current)==null?void 0:h.getAction(T))==null||k.run()},[]),j=n==null?void 0:n.length;return r.jsx(r.Fragment,{children:r.jsx(Cn,{...t,isFull:i,formRef:o,modalProps:{destroyOnClose:!0,maskClosable:!1,...s,footer:(T,{OkBtn:h,CancelBtn:k})=>r.jsxs(r.Fragment,{children:[r.jsx(F,{onClick:()=>{var v;return(v=o.current)==null?void 0:v.resetFields()},children:l("base.cmd.reset")}),r.jsx(k,{}),r.jsx(h,{})]})},children:r.jsxs(ue,{style:{height:"100%"},vertical:!0,children:[r.jsxs(ue,{style:{paddingBottom:5},justify:"space-between",align:"center",children:[r.jsx(ue,{gap:"small",children:j?r.jsx(at,{menu:{items:u,onClick:function(T){var v;const k=(v=T.keyPath.reverse().reduce((L,A)=>{var m;if(Array.isArray(L))return L==null?void 0:L.find(x=>x.key===A);if(L.children)return(m=L.children)==null?void 0:m.find(x=>x.key===A)},u))==null?void 0:v.json;k&&f(k)}},children:r.jsx(F,{type:"link",size:"small",children:r.jsxs(R,{children:[l("terms.template"),r.jsx(Rt,{})]})})}):null}),r.jsx(ue,{gap:"small",children:r.jsxs(R.Compact,{size:"small",children:[r.jsx(F,{icon:r.jsx(Dt,{}),onClick:()=>p("editor.action.fontZoomOut")}),r.jsx(F,{icon:r.jsx(Pt,{}),onClick:()=>p("editor.action.fontZoomIn")}),r.jsx(F,{icon:i?r.jsx(hn,{}):r.jsx(jn,{}),onClick:()=>a(T=>!T)})]})})]}),r.jsx(ue,{flex:"100%",vertical:!0,children:r.jsx(Y.Item,{noStyle:!0,name:"value",children:r.jsx(pt,{ref:c,className:"g-boder",height:i?"100%":300,language:"json",options:{minimap:{enabled:!1}}})})}),r.jsx(Y.Item,{className:"form-only-error",name:"value",rules:[{required:!0,message:l("msg.require")},{validator:(T,h)=>new Promise((k,v)=>{h&&K(h),k(null)}).catch(k=>{throw console.error(k),new Error(l("msg.formatError",{name:"JSON"}))})}]})]})})})};le.show=e=>{const{onOpenChange:n,open:s,...t}=e;let l;const o=document.createDocumentFragment(),c=Ut.createRoot(o);function i({...f}){clearTimeout(l);const u=Ht();l=setTimeout(()=>{document.body.append(o),c.render(r.jsx(Jt,{theme:u.getTheme(),children:r.jsx(le,{...f})}))},100)}function a(){c.unmount(),document.body.removeChild(o)}i({...t,open:!0,onOpenChange:f=>{!f&&a()}})};const gt=`{
    "services": [
        {
            "name": "service-0",
            "addr": ":8080",
            // "interface": "eth0",
            // "admission": "admission-0",
            // "bypass": "bypass-0",
            // "resolver": "resolver-0",
            // "hosts": "hosts-0",
            "handler": {
                "type": "auto",
                // "auth": {
                //     "username": "gost",
                //     "password": "gost"
                // },
                // "auther": "auther-0",
                // "retries": 1,
                // "chain": "chain-0",
                // "metadata": {
                //     "bar": "baz",
                //     "foo": "bar"
                // }
            },
            "listener": {
                "type": "tcp",
                // "auth": {
                //     "username": "user",
                //     "password": "pass"
                // },
                // "auther": "auther-0",
                // "chain": "chain-0",
                // "tls": {
                //     "certFile": "cert.pem",
                //     "keyFile": "key.pem",
                //     "caFile": "ca.pem"
                // },
                // "metadata": {
                //     "abc": "xyz",
                //     "def": 456
                // }
            },
            // "forwarder": {
            //     "nodes": [
            //         {
            //             "name": "target-0",
            //             "addr": "192.168.1.1:1234"
            //         },
            //         {
            //             "name": "target-1",
            //             "addr": "192.168.1.2:2345"
            //         }
            //     ],
            //     "selector": {
            //         "strategy": "round",
            //         "maxFails": 1,
            //         "failTimeout": 30
            //     }
            // }
        }
    ],
    "chains": [
        {
            "name": "chain-0",
            // "selector": {
            //     "strategy": "round",
            //     "maxFails": 1,
            //     "failTimeout": 30
            // },
            "hops": [
                {
                    "name": "hop-0",
                    // "interface": "192.168.1.2",
                    // "selector": {
                    //     "strategy": "rand",
                    //     "maxFails": 3,
                    //     "failTimeout": 60
                    // },
                    // "bypass": "bypass-0",
                    "nodes": [
                        {
                            "name": "node-0",
                            "addr": ":1080",
                            // "interface": "eth1",
                            // "bypass": "bypass-0",
                            "connector": {
                                "type": "socks5",
                                "auth": {
                                    "username": "user",
                                    "password": "pass"
                                },
                                // "metadata": {
                                //     "foo": "bar"
                                // }
                            },
                            "dialer": {
                                "type": "tcp",
                                // "auth": {
                                //     "username": "user",
                                //     "password": "pass"
                                // },
                                // "tls": {
                                //     "caFile": "ca.pem",
                                //     "secure": true,
                                //     "serverName": "example.com"
                                // },
                                // "metadata": {
                                //     "bar": "baz"
                                // }
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "authers": [
        {
            "name": "auther-0",
            "auths": [
                {
                    "username": "user1",
                    "password": "pass1"
                },
                {
                    "username": "user2",
                    "password": "pass2"
                }
            ]
        }
    ],
    "admissions": [
        {
            "name": "admission-0",
            "whitelist": false,
            "matchers": [
                "127.0.0.1",
                "192.168.0.0/16"
            ]
        }
    ],
    "bypasses": [
        {
            "name": "bypass-0",
            "whitelist": false,
            "matchers": [
                "*.example.com",
                ".example.org",
                "0.0.0.0/8"
            ]
        }
    ],
    "resolvers": [
        {
            "name": "resolver-0",
            "nameservers": [
                {
                    "addr": "udp://8.8.8.8:53",
                    "chain": "chain-0",
                    "prefer": "ipv4",
                    "clientIP": "1.2.3.4",
                    "ttl": 60,
                    "timeout": 30
                },
                {
                    "addr": "tcp://1.1.1.1:53"
                },
                {
                    "addr": "tls://1.1.1.1:853"
                },
                {
                    "addr": "https://1.0.0.1/dns-query",
                    "hostname": "cloudflare-dns.com"
                }
            ]
        }
    ],
    "hosts": [
        {
            "name": "hosts-0",
            "mappings": [
                {
                    "ip": "127.0.0.1",
                    "hostname": "localhost"
                },
                {
                    "ip": "192.168.1.10",
                    "hostname": "foo.mydomain.org",
                    "aliases": [
                        "foo"
                    ]
                },
                {
                    "ip": "192.168.1.13",
                    "hostname": "bar.mydomain.org",
                    "aliases": [
                        "bar",
                        "baz"
                    ]
                }
            ]
        }
    ],
    "tls": {
        "certFile": "cert.pem",
        "keyFile": "key.pem",
        "caFile": "ca.pem"
    },
    "log": {
        "output": "stderr",
        "level": "debug",
        "format": "json",
        "rotation": {
            "maxSize": 100,
            "maxAge": 10,
            "maxBackups": 3,
            "localTime": false,
            "compress": false
        }
    },
    "profiling": {
        "addr": ":6060",
        "enabled": true
    },
    "api": {
        "addr": ":18080",
        "pathPrefix": "/api",
        "accesslog": true,
        "auth": {
            "username": "user",
            "password": "password"
        },
        "auther": "auther-0"
    },
    "metrics": {
        "addr": ":9000",
        "path": "/metrics"
    }
}`,rs={en:"Default",zh:"默认"},os={admissions:"https://gost.run/concepts/admission/",authers:"https://gost.run/concepts/auth/",bypasses:"https://gost.run/concepts/bypass/",chains:"https://gost.run/concepts/chain/",hops:"https://gost.run/concepts/hop/",hosts:"https://gost.run/concepts/hosts/",ingresses:"https://gost.run/concepts/ingress/",observers:"https://gost.run/concepts/observer/",resolvers:"https://gost.run/concepts/resolver/",limiters:"https://gost.run/concepts/limiter/",rlimiter:"https://gost.run/concepts/limiter/",climiter:"https://gost.run/concepts/limiter/",routers:"https://gost.run/concepts/router/",sds:"https://gost.run/concepts/sd/",services:"https://gost.run/concepts/service/"},is=[],Ze=Hn(gt,is,{allowTrailingComma:!0}),as=e=>{if(!Ze)return;const n=Jn(Ze,[e,0]);if(n){const{offset:s,length:t}=n;return gt.substring(s,s+t)}},N=(e,n=rs)=>{const s=as(e),t=os[e],l="// "+t+`
`;let o;return s&&(o={label:n,json:l+s}),{def:o,docUrl:t,_docUrl:l}},cs=e=>`{
    "name": "${e}-0",
    "file": {
      "path": "/path/to/file"
    }
  }`,us=(e,n)=>`{
    "name": "${e}-0",
    "redis": {
      "addr": "127.0.0.1:6379",
      "db": "1",
      "password": "123456",
      ${n?`"type": "${n}",`:""}
      "key": "gost:${e}-0"
    }
  }`,ds=e=>`{
    "name": "${e}-0",
    "http": {
      "url": "http://127.0.0.1:8000",
      "timeout": "10s"
    }
  }`,bt=e=>`{
    "name": "${e}-0",
    "plugin": {
      "type": "grpc",
      // "type": "http",
      "addr": "127.0.0.1:8000",
      "token": "gost",
      // "tls": {}
    }
  }`,W=(e,n="",s)=>{const t=n?`// ${n} 
`:"";return[{label:"File",json:t+cs(e)},{label:"Redis",json:t+us(e,s==null?void 0:s.redisType)},{label:"HTTP",json:t+ds(e)},{label:"Plugin",json:t+bt(e)}]},{def:Ge,docUrl:fs,_docUrl:ms}=N("admissions"),ps=[Ge||{label:{zh:"内联",en:"Inline"},json:ms+`
      {
        "name": "admission-0",
        "matchers": [
          "127.0.0.1",
          "192.168.0.0/16",
          "example.com"
        ]
      }`},...W("admission",fs)],{def:hs,docUrl:gs}=N("authers"),bs=[hs,...W("auther",gs)],{def:ys,docUrl:hl,_docUrl:ks}=N("chains"),js=[ys,{label:{zh:"典型转发链",en:"Typical"},cli:"",json:ks+`
{
  "name": "chain-0",
  "hops": [
    {
      "name": "hop-0",
      "nodes": [
        {
          "name": "node-0",
          "addr": "proxy.xxx.com:1080",
          "connector": {
            "type": "socks5",
            "auth": {
              "username": "username",
              "password": "password"
            }
          },
          "dialer": {
            "type": "tcp",
            "tls": {
              "serverName": "proxy.xxx.com"
            }
          }
        }
      ]
    }
  ]
}
      `}],{def:Qe,docUrl:xs,_docUrl:vs}=N("bypasses"),ws=[Qe||{label:{zh:"内联",en:"Inline"},json:vs+`
      {
        "name": "bypass-0",
        "matchers": [
          "127.0.0.1",
          "172.10.0.0/16",
          "localhost",
          "*.example.com",
          ".example.org"
        ]
      }`},...W("bypass",xs)],{def:Xe,docUrl:Ts,_docUrl:Ls}=N("hops"),Os=[Xe||{label:{zh:"内联",en:"Inline"},json:Ls+`
    {
      "name": "hop-0",
      "nodes": [
        {
          "name": "node-0",
          "addr": ":8888",
          "connector": {
            "type": "http"
          },
          "dialer": {
            "type": "tcp"
          }
        },
        {
          "name": "node-1",
          "addr": ":9999",
          "connector": {
            "type": "socks5"
          },
          "dialer": {
            "type": "tcp"
          }
        }
      ]
    }`},...W("hop",Ts)],{def:Ye,docUrl:As,_docUrl:Us}=N("hosts"),$s=[Ye||{label:{zh:"内联",en:"Inline"},json:Us+`
{
  "name": "hosts-0",
  "mappings": [
    {
      "ip": "127.0.0.1",
      "hostname": "example.com"
    },
    {
      "ip": "2001:db8::1",
      "hostname": "example.com"
    }
  ]
}`},...W("hosts",As)],{def:Ke,docUrl:Ss,_docUrl:Is}=N("ingresses"),_s=[Ke||{label:{zh:"内联",en:"Inline"},json:Is+`{
        "name": "ingress-0",
        "rules": [
          {
            "hostname": "example.com",
            "endpoint": "4d21094e-b74c-4916-86c1-d9fa36ea677b"
          },
          {
            "hostname": "example.org",
            "endpoint": "ac74d9dd-3125-442a-a7c1-f9e49e05faca"
          }
        ]
      }`},...W("ingress",Ss,{redisType:"hash"})],{def:Ce,docUrl:Es,_docUrl:Fs}=N("routers"),Ns=[Ce||{label:{zh:"内联",en:"Inline"},json:Fs+`
      {
        "name": "router-0",
        "routes": [
          {
            "net": "192.168.1.0/24",
            "gateway": "192.168.123.2"
          },
          {
            "net": "172.10.0.0/16",
            "gateway": "192.168.123.3"
          }
        ]
      }`},...W("router",Es)],{def:Vs,docUrl:gl,_docUrl:ke}=N("services"),P=(e,n,s)=>{let t=ke+`
  {
    "name": "service-0",
    "addr": ":1080",
    "handler": {
      "type": "${e}",
      // "auth": {
      //   "username": "user",
      //   "password": "password"
      // }
    },
    "listener": {
      "type": "${n}"
    }
  }`;if(s){const l=ye(t,["metadata"],s,{});l.push(...ye(t,["handler","metadata"],s,{})),l.push(...ye(t,["listener","metadata"],s,{})),t=Be(t,l)}return t},zs=[Vs,{label:{zh:"端口转发",en:"Port Forwarding"},cli:"-L tcp://:80/:8080",json:ke+`
      {
        "name": "service-0",
        "addr": ":80",
        "handler": {
          "type": "tcp"
        },
        "listener": {
          "type": "tcp"
        },
        "forwarder": {
          "nodes": [
            {
              "name": "target-0",
              "addr": ":8080"
            }
          ]
        }
      }`},{label:{zh:"反向代理",en:"Reverse Proxy"},cli:"",json:ke+`
      {
        "name": "service-0",
        "addr": ":80",
        "handler": {
            "type": "tcp",
            "metadata": {
                "sniffing": "true"
            }
        },
        "listener": {
            "type": "tcp"
        },
        "forwarder": {
            "nodes": [
                {
                    "name": "target-1",
                    "addr": "www.baidu.com:80",
                    // "host": "myhost.com",
                    // "path": "/"
                    "http": {
                        "host": "www.baidu.com"
                    }
                }
            ]
        }
      }`},{label:{zh:"代理服务",en:"Proxy Service"},children:[{label:"http",children:[{label:"http",json:P("http","tcp")},{label:"https(http+tsl)",json:P("http","tls")},{label:"http+wss",json:P("http","wss")},{label:"http2",json:P("http2","http2")}]},{label:"relay",children:[{label:"relay+tcp",json:P("relay","tcp")},{label:"relay+tls",json:P("relay","tls")},{label:"relay+wss",json:P("relay","tls")}]},{label:"socks",children:[{label:"socks4",json:P("socks","tcp")},{label:"socks5",json:P("socks5","tcp")},{label:"socks5(udp)",json:P("socks5","tcp",{udp:"true"})},{label:"socks5+tls",json:P("socks5","tls",{notls:"true"})}]}]},{label:{zh:"代理转发",en:"Porxy Forwarding"},cli:"-L socks5://:1080 -F socks5://xxx.com:1080",json:ke+`
      {
        "name": "service-0",
        "addr": ":1080",
        "handler": {
          "type": "socks5",
          "chain": "chain-0"
        },
        "listener": {
          "type": "tcp"
        }
      }`}],{def:et,docUrl:Bs,_docUrl:Ms}=N("climiter"),Rs=[et||{label:{zh:"内联",en:"Inline"},json:Ms+`
    {
      "name": "climiter-0",
      "limits": [
        "$ 1000",
        "$$ 100",
        "192.168.1.1  10"
      ]
    }`},...W("climiter",Bs,{redisType:"set"})],{def:tt,docUrl:Ds,_docUrl:Ps}=N("limiters"),Hs=[tt||{label:{zh:"内联",en:"Inline"},json:Ps+`
    {
      "name": "limiter-0",
      "limits": [
        "$ 100MB 100MB",
        "$$ 10MB",
        "192.168.1.1  512KB 1MB",
        "192.168.0.0/16  1MB  5MB"
      ]
    }`},...W("limiters",Ds,{redisType:"set"})],{def:nt,docUrl:Js,_docUrl:Ws}=N("rlimiter"),qs=[nt||{label:{zh:"内联",en:"Inline"},json:Ws+`
    {
      "name": "rlimiter-0",
      "limits": [
        "$ 100",
        "$$ 10",
        "192.168.1.1  50",
        "192.168.0.0/16  5"
      ]
    }`},...W("rlimiter",Js,{redisType:"set"})],{def:Zs,docUrl:bl,_docUrl:Gs}=N("resolvers"),Qs=[Zs,{label:"Plugin",json:Gs+bt("resolver")}],{def:st,docUrl:yl,_docUrl:Xs}=N("sds"),Ys=[st||{label:"HTTP Plugin",json:Xs+`
      // https://gost.run/concepts/sd/
      {
        "name": "sd-0",
        "plugin": {
          "type": "http",
          "addr": "http://127.0.0.1:8000/sd",
          // "token": "gost",
          // "tls": {}
        }
      }`}],{def:lt,docUrl:kl,_docUrl:Ks}=N("observers"),Cs=[lt||{label:"Plugin",json:Ks+`
      {
        "name": "observer-0",
        "plugin": {
          "type": "grpc",
          // "type": "http",
          "addr": "127.0.0.1:8000",
          "token": "gost",
          // "tls": {}
        }
      }`}],el={admissions:ps,authers:bs,bypasses:ws,chains:js,climiters:Rs,limiters:Hs,rlimiters:qs,hops:Os,hosts:$s,ingresses:_s,resolvers:Qs,routers:Ns,sds:Ys,observers:Cs,services:zs},yt=e=>{const{name:n}=e;return g.useMemo(()=>el[n],[n])},kt=e=>{const{name:n,localApi:s,gostConfig:t,localConfig:l}=e,o=g.useMemo(()=>(t==null?void 0:t[n])||[],[t,n]),c=g.useMemo(()=>s?(l==null?void 0:l[n])||[]:[],[l,n,s]),i=g.useMemo(()=>[...o,...c],[o,c]);return{dataList:o,dataSource:i}},Oe=le.show,ae=pe.createContext({}),rt=(e,n,s)=>JSON.stringify(n),tl=(e,n)=>{var s,t;return((t=(s=e==null?void 0:e.name)==null?void 0:s.toLowerCase())==null?void 0:t.indexOf(n))!==-1},nl=e=>{const{name:n,title:s,api:t,localApi:l,keyName:o,rowKey:c="name",keyword:i,renderConfig:a=rt,filter:f=tl}=e,{t:u}=G(),{localList:p,comm:j}=g.useContext(Fe),{gostConfig:T,localConfig:h}=g.useContext(re),{dataList:k,dataSource:v}=kt({localApi:l,name:o,gostConfig:T,localConfig:h}),L=yt({name:o});Wt.useApp();const{deleteValue:A,updateValue:m,disable:x,enable:d,updateLocal:y,deleteLocal:b,addValue:U}=j,_=g.useRef({dataList:k,dataSource:v});g.useImperativeHandle(_,()=>({dataList:k,dataSource:v}),[k,v]);const Q=g.useMemo(()=>i?v.filter(S=>f(S,i)):v,[v,f,i]);return g.useEffect(()=>{function S({path:w,record:O}){const{dataList:q,dataSource:B}=_.current,Z=q.includes(O),D=O.name,X=w.split(","),wt=X.reduce((C,ce)=>C==null?void 0:C[ce],O),Tt=C=>{let ce=O;X.forEach((Me,Lt)=>{Lt===X.length-1?ce[Me]=C:ce=ce[Me]})};Oe({title:u("base.cmd.edit"),initialValues:{value:me(wt)},onFinish:async C=>(Tt(K(C.value)),Z?await m(D,O):await y(D,O),!0)})}return E.on(`edit:${n}`,S),()=>{E.off(`edit:${n}`,S)}},[n,u,y,m]),r.jsx("div",{style:{height:348,overflow:"auto"},children:r.jsx(qt,{rowKey:S=>S._id_||S.name,scroll:{y:290},size:"small",dataSource:Q,columns:[{title:u("base.form.name"),dataIndex:c,ellipsis:!0,width:100},{title:u("base.form.details"),ellipsis:!0,render:(S,w,O)=>{const B=k.includes(w)?D=>m(w.name,D||w):D=>y(w.name,D||w);let Z;try{Z=a(S,w,O)}catch{Z=rt(S,w)}return r.jsx(ae.Provider,{value:{update:B},children:Z})}},{title:u("base.cmd.controls"),width:l?120:90,align:"right",dataIndex:c,render:(S,w,O)=>{const q=k.includes(w),B={...w};return delete B.status,r.jsxs(R,{size:2,children:[l?q?r.jsx(F,{title:u("base.cmd.disable"),icon:r.jsx(ct,{style:{color:Zt.primary}}),type:"link",size:"small",onClick:async()=>{await x(w)}}):r.jsx(F,{title:u("base.cmd.enabled"),type:"link",icon:r.jsx(Nn,{style:{color:Gt.primary}}),size:"small",onClick:async()=>{await d(w)}}):null,r.jsx(F,{title:u("base.cmd.edit"),icon:r.jsx(Qt,{}),type:"link",size:"small",onClick:()=>{Oe({title:u("title.edit",{name:S||""}),templates:L,initialValues:{value:me(B)},onFinish:async Z=>{const{value:D}=Z,X=K(D);return q?await m(w.name,X):await y(w.name,{...B,...X}),!0}})}}),r.jsx(F,{title:u("base.cmd.copy"),icon:r.jsx(Xt,{}),type:"link",size:"small",onClick:()=>{Oe({title:u("title.copied",{name:S||""}),templates:L,initialValues:{value:me(B)},onFinish:async Z=>{const{value:D}=Z,X=K(D);return await j.addValue(X),!0}})}}),r.jsx(Yt,{title:u("text.warn"),description:u("text.deleteing"),onConfirm:()=>{q?A(w):b(w)},children:r.jsx(F,{title:u("base.cmd.del"),icon:r.jsx(Kt,{}),type:"link",size:"small"})})]})}}],pagination:!1})})},sl=e=>{const{t:n}=G(),{keyName:s,title:t}=e,{comm:l}=g.useContext(Fe),o=yt({name:s}),c={title:n("title.add",{name:t}),templates:o,onFinish:async i=>{const{value:a}=i,f=K(a);return await l.addValue(f),!0}};return r.jsx(F,{icon:r.jsx(Ct,{}),size:"small",onClick:()=>{le.show(c)}})},V=e=>({keyName:e,api:$t[e],localApi:St[e],rowKey:"name"}),ll=[{name:"admission",title:"准入控制器(Admission)",subTitle:"准入控制器",...V("admissions")},{name:"auther",title:"认证器(Auther)",subTitle:"认证器",...V("authers")},{name:"bypass",title:"分流器(Bypass)",subTitle:"分流器",...V("bypasses")},{name:"chain",title:"转发链(Chain)",subTitle:"转发链",...V("chains")},{name:"climiter",title:"并发连接数限制",subTitle:"",...V("climiters")},{name:"limiter",title:"流量速率限制",subTitle:"",...V("limiters")},{name:"rlimiter",title:"请求速率限制",subTitle:"",...V("rlimiters")},{name:"hop",title:"跳跃点(Hop)",subTitle:"跳跃点",...V("hops")},{name:"host",title:"主机映射器(Hosts)",subTitle:"主机映射器",...V("hosts")},{name:"ingress",title:"Ingress",subTitle:"Ingress",...V("ingresses")},{name:"resolver",title:"域名解析器(Resolver)",subTitle:"域名解析器",...V("resolvers")},{name:"service",title:"服务(Service)",subTitle:"服务",...V("services")},{name:"sd",title:"服务发现(SD)",subTitle:"服务发现",...V("sds")},{name:"observer",title:"观测器(Observer)",subTitle:"观测器",...V("observers")}],rl=e=>ll.find(n=>n.name===e),_e=e=>{const{boxShadow:n,className:s,...t}=e,l=je(s,{"antd-cord-boxShadow":n});return r.jsx(en,{className:l,...t})},z=e=>{const{t:n}=G(),{title:s,subTitle:t,name:l,keyName:o,api:c,boxShadow:i=!0,bordered:a=!1,rowKey:f="name",renderConfig:u,localApi:p,filter:j}=g.useMemo(()=>({...rl(e.module||""),title:n(`modules.${e.module}.title`),subTitle:n(`modules.${e.module}.subTitle`),...e}),[e,n]),[T,h]=g.useState(""),k={title:t||"",keyword:T,name:l,api:c,keyName:o,rowKey:f,localApi:p,renderConfig:u,filter:j},{gostConfig:v,localConfig:L}=g.useContext(re),{dataSource:A}=kt({localApi:p,name:o,gostConfig:v,localConfig:L}),m=g.useMemo(()=>{const x=async d=>{await c.post(d)};return{updateValue:async(d,y,b=!0)=>{await c.put(d,y),b&&E.emit("apiUpdate",!0)},deleteValue:async(d,y=!0)=>{await c.delete(d.name),y&&E.emit("apiUpdate",!0)},addValue:async(d,y=!0)=>{let b=d.name||`${l}-0`;const U=()=>A==null?void 0:A.find(_=>_.name===b);if(U()&&!await new Promise((Q,S)=>{ze.confirm({title:n("msg.invalidName"),content:n("msg.autofixName"),zIndex:2e3,onOk:()=>Q(!0),onCancel:()=>Q(!1)})}))throw!1;for(;U();)b=b.replace(/\d*$/,_=>String(_==""?"-0":Number(_)+1));await x({...d,name:b}),d.name!==b&&tn.info({description:n("msg.fixName",{name:b}),message:n("msg.autofix")}),y&&E.emit("apiUpdate",!0)},disable:async d=>{p&&(await c.delete(d.name),await p.add(d),E.emit("update",!0))},enable:async d=>{p&&(await c.post(d),await p.delete(d.name),E.emit("update",!0))},updateLocal:async(d,y)=>{p&&(await p.put(d,{...y,name:d}),E.emit("localUpdate"))},deleteLocal:async d=>{p&&(await p.delete(d.name),E.emit("localUpdate"))}}},[c,A,p,l,n]);return g.useEffect(()=>It(l,m),[m,l]),r.jsx(Fe.Provider,{value:{name:l,comm:m},children:r.jsx(_e,{boxShadow:i,bordered:a,title:s,extra:r.jsxs(R,{children:[r.jsx(Ve.Search,{allowClear:!0,onChange:x=>{const d=x.target.value;h(d)},size:"small"}),r.jsx(sl,{...k})]}),children:r.jsx(nl,{...k})})})},ol=e=>{var i,a,f;const{name:n,addr:s}=e,t=(i=e.connector)==null?void 0:i.type,l=(a=e.dialer)==null?void 0:a.type,o=((f=e.connector)==null?void 0:f.metadata)||e.metadata,c=o?_t.stringify(o):"";return r.jsxs(R,{children:[(t||l)&&r.jsx(J,{color:"#87d068",children:`${t}${l?"+"+l:""}`}),r.jsx(J,{color:"green",children:s}),c&&r.jsx(J,{color:"purple",title:"_metadata",children:"metadata"})]})};function Ee({node:e,upjson:n}){const{t:s}=G(),{name:t}=e,{update:l}=g.useContext(ae),o=g.useMemo(()=>n?{className:"editor-json",onDoubleClick:()=>{le.show({title:s("base.cmd.edit"),initialValues:{value:me(e)},onFinish:async c=>(n(K(c.value)),l(),!0)})}}:{},[e,s,l,n]);return r.jsx(fe,{color:"#ddffbf",title:r.jsx(ol,{...e}),children:r.jsx(J,{bordered:!1,color:"green",title:s("text.doubleClickEdit"),...o,children:t})})}const jt=e=>{var c;let n=e,s=!1;const{gostConfig:t,localConfig:l}=g.useContext(re);if(!n.nodes){const i=[...(t==null?void 0:t.hops)||[],...(l==null?void 0:l.hops)||[]].find(a=>a.name===n.name);i&&(s=!0,n=i)}const{nodes:o}=n;if(!o||(o==null?void 0:o.length)<=0)return`[${e.name}(noNodes)]`;if(s){const i=(c=t==null?void 0:t.hops)==null?void 0:c.includes(n),a=n.name;return r.jsx(ae.Provider,{value:{update:async f=>{const u=await Ne("hop");return(i?j=>u.updateValue(a,j||n):j=>u.updateLocal(a,j||n))(f)}},children:r.jsx(R,{size:5,children:o.map((f,u)=>r.jsx(Ee,{node:f,upjson:p=>o[u]=p},u))})})}return r.jsx(R,{size:5,children:o.map((i,a)=>r.jsx(Ee,{node:i,upjson:f=>o[a]=f},i.name+a))})};function il(e){const{update:n}=g.useContext(ae),{t:s}=G();return r.jsx(R,{size:5,children:e.hops.map((t,l)=>{const o=r.jsx(jt,{...t});return r.jsx(fe,{title:o,color:"#c7e7ff",arrow:!1,children:r.jsx(J,{bordered:!1,color:"blue",className:"editor-json",title:s("text.doubleClickEdit"),onDoubleClick:()=>{le.show({title:s("base.cmd.edit"),initialValues:{value:me(t)},onFinish:async c=>(e.hops[l]=K(c.value),n(),!0)})},children:t.name})},t.name+l)}).reduce((t,l,o)=>(t.length>0&&t.push(r.jsx(nn,{style:{color:"blue",fontSize:12}},"_sp_"+o)),t.push(l),t),[])})}function xt(e){const{hops:n}=e;return r.jsx(il,{hops:n,root:e})}const al=e=>{g.useContext(re);const n={module:"chain",renderConfig:(s,t,l)=>r.jsx(xt,{...t})};return r.jsx(z,{...n})},vt=(e,n)=>{const{gostConfig:s,localConfig:t}=g.useContext(re),l=g.useMemo(()=>{var i;return(i=s==null?void 0:s[n])==null?void 0:i.find(a=>a.name===e)},[s,e,n]),o=g.useMemo(()=>{var i;return(i=t==null?void 0:t[n])==null?void 0:i.find(a=>a.name===e)},[t,e,n]);return[l??o,!!l]},cl=e=>{const[n,s]=vt(e.hop,"hops");let t=e,l=!1;(!t.nodes||t.nodes.length===0)&&(t=n,l=!!n);const{nodes:o}=t;if(!o||(o==null?void 0:o.length)<=0)return`[${e.name}(noNodes)]`;const c=r.jsx(R,{size:5,children:o.map((i,a)=>r.jsx(Ee,{node:i,upjson:f=>o[a]=f},i.name+a))});if(l){const i=t.name;return r.jsx(ae.Provider,{value:{update:async a=>{const f=await Ne("hop");return(s?p=>f.updateValue(i,p||t):p=>f.updateLocal(i,p||t))(a)}},children:c})}return c},ot=e=>{const[n,s]=vt(e.chainName,"chains");if(!n)return"[no chain]";const t=e.chainName;return r.jsx(ae.Provider,{value:{update:async l=>{const o=await Ne("chain");return(s?i=>o.updateValue(t,i||n):i=>o.updateLocal(t,i||n))(l)}},children:r.jsx(xt,{...n})})},ul=e=>{const{name:n,addr:s,handler:t,listener:l,forwarder:o}=e,{t:c}=G(),i=g.useMemo(()=>{const a=t==null?void 0:t.type,f=l==null?void 0:l.type;return a===f?a:`${a}+${f}`},[t,l]);return r.jsxs(R,{children:[r.jsx(J,{color:"#87d068",children:i}),r.jsx(J,{color:"green",children:s}),t.chain&&r.jsx(fe,{title:r.jsx(ot,{chainName:t.chain}),color:"#c7e7ff",arrow:!1,children:r.jsx(J,{children:c("modules.chain.subTitle")})}),l.chain&&r.jsx(fe,{title:r.jsx(ot,{chainName:l.chain}),color:"#fff0d7",arrow:!1,children:r.jsx(J,{color:"orange",children:c("terms.key0")})}),o&&r.jsx(fe,{title:r.jsx(cl,{...o}),color:"#c7e7ff",arrow:!1,children:r.jsx(J,{children:c("terms.forwarder")})})]})},dl=e=>{const{colSpan:n}=e;it();const s={module:"service",renderConfig:(t,l,o)=>r.jsx(ul,{...l}),filter:(t,l)=>{const{name:o,addr:c,handler:i,listener:a}=t;function f(u){const p=u==null?void 0:u.toLowerCase();return p?p.indexOf(l)!==-1:!1}return f(o)||f(c)||f(i==null?void 0:i.type)||f(a==null?void 0:a.type)}};return r.jsx($,{...n,xxl:16,children:r.jsx(z,{...s})})},fl=e=>r.jsx(z,{module:"hop",renderConfig:(n,s,t)=>r.jsx(jt,{...s})}),H={xs:24,sm:24,md:12,lg:12,xl:12,xxl:8},Ae={sm:24,xxl:8},jl=()=>{const{isLoading:e}=g.useContext(re),n=ge(),{t:s}=G(),t=it(),[l,o]=g.useState(!1),[c,i]=g.useState(!1),[a,f]=g.useState(!0),[u,p]=g.useState([]),j=g.useRef({});g.useEffect(()=>{Et().then(h=>h.sort((k,v)=>{const L=k.time||0;return(v.time||0)-L})).then(h=>p(h.map(k=>({key:k.addr,label:r.jsx("a",{href:`./?use=${k.addr}`,children:k.addr})}))))},[n.addr]),g.useEffect(()=>{Ft().then(v=>{v&&E.emit("update",!1)});const h=j.current.onSave=async()=>{try{i(!0);const{saveFormat:v,savePath:L}=ge.get()||{};await Nt(v,L),f(!0)}finally{i(!1)}},k=(v=!1)=>{var L;if(v&&f(!1),!(!((L=ge.get())!=null&&L.autoSave)||!v))return h()};return E.on("update",k),E.on("apiUpdate",k),()=>{E.off("update",k),E.off("apiUpdate",k)}},[]);const T=g.useMemo(()=>{const h=[];return u.length&&(h.push({key:"2",label:s("manage.cmd.switch"),children:u}),h.push({type:"divider"})),h.push({key:"new",label:s("manage.cmd.new"),onClick:()=>{window.open(location.href,void 0,"noopener")}}),h},[u,s]);return r.jsxs(ve,{style:{height:"100vh",overflow:"hidden"},children:[r.jsxs(ve.Header,{style:{color:"#FFF",paddingInline:20},children:[r.jsxs(we,{align:"middle",justify:"space-between",wrap:!1,children:[r.jsx($,{color:"",children:r.jsx(F,{type:"link",loading:e,icon:r.jsx(sn,{}),onClick:async()=>{E.emit("update")},children:s("manage.cmd.reload")})}),r.jsx($,{children:n.addr}),r.jsx($,{children:r.jsxs(R,{children:[r.jsxs(R.Compact,{children:[r.jsx(F,{icon:a?r.jsx(ct,{}):r.jsx(Ln,{}),loading:c,onClick:()=>{var h,k;return(k=(h=j.current)==null?void 0:h.onSave)==null?void 0:k.call(h)},children:s("manage.cmd.save")}),r.jsx(F,{icon:r.jsx(Sn,{}),onClick:()=>o(!0)})]}),r.jsx(F,{icon:r.jsx(ln,{}),onClick:()=>{Qn(Se(t),"gost.json")},children:s("manage.cmd.download")}),r.jsx(at.Button,{menu:{activeKey:n.addr,items:T},onClick:Vt,children:s("manage.cmd.logout")}),r.jsx(zt,{}),r.jsx(Bt,{})]})})]}),r.jsx(ze,{destroyOnClose:!0,open:l,onCancel:()=>o(!1),footer:!1,children:r.jsxs(Y,{initialValues:n,layout:"horizontal",labelCol:{span:4},onValuesChange:(h,k)=>{Object.assign(n,h),ge.set(n),n.isLocal&&Mt(n.addr,n)},children:[r.jsx(Y.Item,{name:"autoSave",label:s("manage.label.autoSave"),valuePropName:"checked",children:r.jsx(rn,{})}),r.jsx(Y.Item,{name:"saveFormat",label:s("manage.label.format"),initialValue:"json",children:r.jsxs(Te.Group,{optionType:"button",buttonStyle:"solid",children:[r.jsx(Te,{value:"json",children:"json"}),r.jsx(Te,{value:"yaml",children:"yaml"})]})}),r.jsx(Y.Item,{name:"savePath",label:s("manage.label.path"),trigger:"onChange",children:r.jsx(Ve,{placeholder:s("placeholder.savePath")})})]})})]}),r.jsx(ve.Content,{style:{height:"100%",padding:16,boxSizing:"border-box",overflow:"auto"},children:r.jsxs(we,{gutter:[16,16],children:[r.jsx(dl,{colSpan:H}),r.jsx($,{...H,children:r.jsx(al,{})}),r.jsx($,{...H,children:r.jsx(fl,{})}),r.jsx($,{...H,children:r.jsx(z,{module:"auther"})}),r.jsx($,{...H,children:r.jsx(z,{module:"admission"})}),r.jsx($,{...H,children:r.jsx(z,{module:"bypass"})}),r.jsx($,{...H,children:r.jsx(z,{module:"host"})}),r.jsx($,{...H,children:r.jsx(z,{module:"ingress"})}),r.jsx($,{...H,children:r.jsx(z,{module:"resolver"})}),r.jsx($,{...H,children:r.jsx(z,{module:"sd"})}),r.jsx($,{...H,children:r.jsx(z,{module:"observer"})}),r.jsx($,{span:24,children:r.jsx(_e,{boxShadow:!0,title:s("manage.label.limit"),children:r.jsxs(we,{gutter:[16,16],children:[r.jsx($,{...Ae,children:r.jsx(z,{module:"limiter",bordered:!0,boxShadow:!1})}),r.jsx($,{...Ae,children:r.jsx(z,{module:"rlimiter",bordered:!0,boxShadow:!1})}),r.jsx($,{...Ae,children:r.jsx(z,{module:"climiter",bordered:!0,boxShadow:!1})})]})})}),r.jsx($,{span:24,children:r.jsx(_e,{boxShadow:!0,title:s("manage.label.allConfig"),styles:{body:{padding:20}},children:r.jsx(pt,{className:"g-boder",value:Se(t),height:500,language:"json",options:{minimap:{enabled:!1},readOnly:!0}})})})]})})]})};export{jl as default};
